---
import { Image } from "astro:assets";
import { BiTime, BiFolder, BiSolidFolder, BiSolidPurchaseTag } from "react-icons/bi";
import { dateFormat, dateBlogFormat } from "@/lib/utils/dateFormat";
import { humanize, markdownify, slugify } from "@/lib/utils/textConverter";
import type { PostData } from "@/types";

const { post } = Astro.props;
const { Content } = await post.render();
const { title, categories, image, date, tags }: PostData = post.data;
const blogDate = dateBlogFormat(date);
---

<section class="section">
  <div class="container">
    <div class="row">
      <div class="mx-auto">
        <div class="rounded-xl p-2.5 lg:p-8 shadow md:p-[60px]">
          <article>
            <div class="flex items-center flex-row-reverse">
              <h1 set:html={markdownify(title)} class="w-full leading-[1.4rem] text-lg sm:text-2xl" />
              <time class="pr-2 py-1.5 mr-2 sm:pr-3 sm:py-2 sm:mr-3 text-center border-r-[1px] border-solid leading-none font-normal" datetime="2024-12-30" aria-hidden="true">
                <span class="block mb-1 text-xs-fit sm:text-sm-fit">{blogDate.year}</span>
                <span class="block text-sm-fit sm:text-2xl-fit">{blogDate.date}</span>
              </time>
            </div>
            <ul
              class="mt-4 mb-8 flex flex-wrap items-center space-x-3 text-text"
            >
              <li class="mr-5 flex items-center flex-wrap font-medium">
                <BiTime className="mr-2 h-5 w-5 text-gray-600" />
                <span class="text-sm">{dateFormat(date)}</>
              </li>
              <li class="mr-5 flex items-center flex-wrap">
                <BiFolder className="mr-2 h-[18px] w-[18px] text-gray-600" />
                <>
                  <ul>
                    {categories.map((category: string, i: number) => (
                      <li class="inline-block">
                        <a
                          href={`/categories/${slugify(category)}`}
                          class="mr-2 rounded-md border-solid border border-gray-600 hover:text-primary hover:border-primary text-xs font-medium px-1 py-0.5"
                        >
                          {humanize(category)}
                        </a>
                      </li>
                    ))}
                  </ul>
                </>
              </li>
            </ul>
            {
              image && (
                <Image
                  src={image}
                  height={500}
                  width={1000}
                  alt={title}
                  class="rounded-lg"
                />
              )
            }
            <div class="content mb-16 text-left">
              <Content />
              <!-- <Markdown content={post.body} components={shortcodes} /> -->
            </div>
            <li class="mb-1 flex items-center flex-wrap">
              <BiSolidFolder className="mr-2 h-[18px] w-[18px] text-gray-600" />
              <>
                <ul>
                  {categories.map((category: string, i: number) => (
                    <li class="inline-block">
                      <a
                        href={`/categories/${slugify(category)}`}
                        class="mr-2 rounded-md border-solid border border-gray-600 hover:text-primary hover:border-primary text-xs font-medium px-1 py-0.5"
                      >
                        {humanize(category)}
                      </a>
                    </li>
                  ))}
                </ul>
              </>
            </li>
            <li class="flex items-center flex-wrap">
              <BiSolidPurchaseTag className="mr-2 h-[18px] w-[18px] text-gray-600" />
              <>
                <ul>
                  {tags.map((tag: string, i: number) => (
                    <li class="inline-block">
                      <a
                        href={`/tags/${slugify(tag)}`}
                        class="mr-3 hover:text-primary hover:border-primary text-sm font-medium"
                      >
                        #{humanize(tag)}
                      </a>
                    </li>
                  ))}
                </ul>
              </>
            </li>
          </article>
        </div>
      </div>
    </div>
  </div>
</section>
