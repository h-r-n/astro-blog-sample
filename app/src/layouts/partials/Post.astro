---
import { Image } from "astro:assets";
import { BiCalendarEdit, BiCategoryAlt } from "react-icons/bi";
import { settings } from "@/config/config.json";
import dateFormat from "@/lib/utils/dateFormat";
import { humanize, plainify, slugify } from "@/lib/utils/textConverter";
const { post } = Astro.props;
---

<div class="col-12 sm:col-6">
  {post.data.image && (
    <a
      href={`/posts/${post.slug}`}
      class="rounded-lg block hover:text-primary overflow-hidden group"
    >
      <Image
        class="group-hover:scale-[1.03] transition duration-300 w-full"
        src={post.data.image}
        alt={post.data.title}
        width="445"
        height="230"
      />
    </a>
  )}
  <ul class="mt-6 mb-4 flex flex-wrap items-center text-text">
    <li class="mr-5 flex items-center flex-wrap font-medium">
      <BiCalendarEdit className="mr-1 h-5 w-5 text-gray-600" />
      <>{dateFormat(post.data.date)}</>
    </li>
    <li class="mr-5 flex items-center flex-wrap">
      <BiCategoryAlt className="mr-1 h-[18px] w-[18px] text-gray-600" />
      <>
        <ul>
          {post.data.categories.map((category: string, i: number) => (
            <li class="inline-block">
              <a
                href={`/categories/${slugify(category)}`}
                class="mr-2 hover:text-primary font-medium"
              >
                {humanize(category)}
                {i !== post.data.categories.length - 1 && ","}
              </a>
            </li>
          ))}
        </ul>
      </>
    </li>
  </ul>
  <h3 class="mb-4">
    <a
      href={`/posts/${post.slug}`}
      class="block hover:text-primary transition duration-300"
    >
      {post.data.title}
    </a>
  </h3>
  <p class="text-text">
    {plainify(
      post.body?.slice(
        0,
        Number(settings.summary_length)
      )
    )}
    ...
  </p>
</div>
